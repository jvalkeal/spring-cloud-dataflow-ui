<h1>Create Definition for Task App {{id}}</h1>

<form class="form-horizontal" novalidate [formGroup]="form" (ngSubmit)="submitTaskDefinition()">

  <fieldset id="commonDefinitionParameters">
    <div class="form-group" [ngClass]="form.controls.definitionName.errors ? 'has-warning has-feedback' : ''">
      <label for="definitionName" class="col-sm-3 control-label">Definition Name</label>
      <div class="col-sm-9">
        <input type="text" id="definitionName" name="definitionName" autofocus
              class="form-control" placeholder="Enter a definition name" formControlName="definitionName">
        <span class="glyphicon glyphicon-warning-sign form-control-feedback" *ngIf="form.controls.definitionName.errors"></span>
        <p class="help-block">The name of the definition must be different from the app name</p>
      </div>
    </div>
  </fieldset>

  <fieldset id="taskParameters">
    <legend>Parameters</legend>
    <div class="form-group" *ngFor="let definitionParam of appInfo?.options">
    
      <label for="{{definitionParam.name}}" class="col-sm-3 control-label">{{definitionParam.name}}</label>
      <div class="col-sm-7" ng-if="definitionParam.type !== 'Password' && definitionParam.type !== 'boolean'">
        <input type="text" id="{{definitionParam.name}}"
               name="{{definitionParam.name}}" class="form-control" placeholder="" ng-model="definitionParam.value">
        <p class="help-block">{{definitionParam.description}}</p>
      </div>
      <div class="col-sm-7" *ngIf="definitionParam.type === 'Password'">
        <input type="password" id="{{definitionParam.name}}"
               name="{{definitionParam.name}}" class="form-control" placeholder="" ng-model="definitionParam.value">
        <p class="help-block">{{definitionParam.description}}</p>
      </div>
      <div class="col-sm-7" *ngIf="definitionParam.type === 'boolean'">
        <div class="checkbox">
          <label>
            <input type="checkbox" id="{{definitionParam.name}}" ng-true-value="'true'" ng-false-value="'false'"
                   name="{{definitionParam.name}}" ng-model="definitionParam.value">
              {{definitionParam.description}}
          </label>
        </div>
      </div>
      <div class="col-sm-2 checkbox">
        <label>
          <input type="checkbox" id="{{definitionParam.nameInclude}}" ng-model="definitionParam.valueInclude"
                 ng-true-value="'true'" ng-false-value="'false'"> Include
        </label>
      </div>
      
    </div>
    <div class="row" *ngIf="!appInfo">No parameters available.</div>
  </fieldset>

  <div class="row">
    <div class="col-md-12 text-right">
      <button type="button" class="btn btn-default" (click)="back()">Back</button>
    </div>
    <div class="col-md-12 text-left">
      <button type="submit" class="btn btn-default" [disabled]="!form.valid">Submit</button>
    </div>
  </div>

</form>
